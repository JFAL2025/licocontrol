{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - LicoControl</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
    <div class="container">
        <!-- Sidebar Elegante -->
        <div class="sidebar">
            <div class="logo">
                <h1>LicoControl</h1>
                <p>Licorería "El Cruce"</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-module="dashboard">
                    <i class="fas fa-chart-line"></i> Dashboard
                </li>
                <li class="nav-item" data-module="inventory">
                    <i class="fas fa-boxes"></i> Inventario
                </li>
                <li class="nav-item" data-module="sales">
                    <i class="fas fa-cash-register"></i> Ventas
                </li>
                <li class="nav-item" data-module="reports">
                    <i class="fas fa-chart-bar"></i> Reportes
                </li>
                <li class="nav-item" data-module="products">
                    <i class="fas fa-wine-bottle"></i> Productos
                </li>
            </ul>
        </div>
        
        <!-- Main Content Elegante -->
        <div class="main-content">
            <div class="header">
                <h2>Dashboard Principal</h2>
                <div class="user-info">
                    <span>Administrador - Licorería "El Cruce"</span>
                    <div class="user-avatar">A</div>
                </div>
            </div>
            
            <!-- Módulo: Dashboard -->
            <div class="module-section active">
                <!-- Alertas de Stock Crítico -->
                <div class="alert-panel">
                    <div class="alert-header">
                        <div class="alert-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3>Alertas de Stock Bajo</h3>
                        <span class="alert-count">3 alertas activas</span>
                    </div>
                    <ul class="alert-list">
                        <li class="alert-item">
                            <div class="alert-product">
                                <span class="product-name">Whisky Johnnie Walker Red Label</span>
                                <span class="product-stock">Stock: 5 unidades</span>
                            </div>
                            <span class="badge badge-critical">Stock Crítico</span>
                        </li>
                        <li class="alert-item">
                            <div class="alert-product">
                                <span class="product-name">Vino Casillero del Diablo</span>
                                <span class="product-stock">Stock: 8 unidades</span>
                            </div>
                            <span class="badge badge-warning">Stock Bajo</span>
                        </li>
                        <li class="alert-item">
                            <div class="alert-product">
                                <span class="product-name">Vodka Absolut</span>
                                <span class="product-stock">Stock: 3 unidades</span>
                            </div>
                            <span class="badge badge-critical">Stock Crítico</span>
                        </li>
                    </ul>
                </div>
                
                <!-- Cards de Métricas Principales -->
                <div class="dashboard-cards">
                    <div class="card fade-in">
                        <div class="card-header">
                            <div>
                                <div class="card-value">$12,458,000</div>
                                <div class="card-title">Ventas del Mes</div>
                            </div>
                            <div class="card-icon sales">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                        </div>
                        <div class="card-trend trend-up">
                            <i class="fas fa-arrow-up"></i> 12% vs mes anterior
                        </div>
                        <div class="card-footer">
                            <span>Meta: $15,000,000</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 83%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card fade-in">
                        <div class="card-header">
                            <div>
                                <div class="card-value">342</div>
                                <div class="card-title">Productos en Stock</div>
                            </div>
                            <div class="card-icon inventory">
                                <i class="fas fa-boxes"></i>
                            </div>
                        </div>
                        <div class="card-trend trend-down">
                            <i class="fas fa-arrow-down"></i> 5% productos bajos
                        </div>
                        <div class="card-footer">
                            <span>Stock total valorizado</span>
                            <div class="stock-value">$45,200,000</div>
                        </div>
                    </div>
                    
                    <div class="card fade-in">
                        <div class="card-header">
                            <div>
                                <div class="card-value">156</div>
                                <div class="card-title">Ventas Hoy</div>
                            </div>
                            <div class="card-icon products">
                                <i class="fas fa-receipt"></i>
                            </div>
                        </div>
                        <div class="card-trend trend-up">
                            <i class="fas fa-arrow-up"></i> 8% vs ayer
                        </div>
                        <div class="card-footer">
                            <span>Ingresos del día</span>
                            <div class="daily-income">$3,850,000</div>
                        </div>
                    </div>
                    
                    <div class="card fade-in">
                        <div class="card-header">
                            <div>
                                <div class="card-value">28</div>
                                <div class="card-title">Alertas Activas</div>
                            </div>
                            <div class="card-icon customers">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                        </div>
                        <div class="card-trend trend-up">
                            <i class="fas fa-arrow-up"></i> 3 nuevas hoy
                        </div>
                        <div class="card-footer">
                            <span>Prioridad alta: 5</span>
                            <span class="priority-high">Críticas: 3</span>
                        </div>
                    </div>
                </div>

                <!-- Gráficos y Métricas Secundarias -->
                <div class="metrics-grid">
                    <!-- Gráfico de Ventas por Categoría -->
                    <div class="metric-card large">
                        <div class="metric-header">
                            <h4>Ventas por Categoría (Este Mes)</h4>
                            <select class="metric-filter">
                                <option>Este Mes</option>
                                <option>Mes Anterior</option>
                                <option>Este Año</option>
                            </select>
                        </div>
                        <div class="chart-container">
                            <div class="category-chart">
                                <div class="category-item">
                                    <div class="category-info">
                                        <span class="category-name">Whisky</span>
                                        <span class="category-percent">45%</span>
                                    </div>
                                    <div class="category-bar">
                                        <div class="bar-fill" style="width: 45%" data-category="whisky"></div>
                                    </div>
                                    <span class="category-amount">$5,605,000</span>
                                </div>
                                <div class="category-item">
                                    <div class="category-info">
                                        <span class="category-name">Vino</span>
                                        <span class="category-percent">25%</span>
                                    </div>
                                    <div class="category-bar">
                                        <div class="bar-fill" style="width: 25%" data-category="vino"></div>
                                    </div>
                                    <span class="category-amount">$3,114,500</span>
                                </div>
                                <div class="category-item">
                                    <div class="category-info">
                                        <span class="category-name">Vodka</span>
                                        <span class="category-percent">15%</span>
                                    </div>
                                    <div class="category-bar">
                                        <div class="bar-fill" style="width: 15%" data-category="vodka"></div>
                                    </div>
                                    <span class="category-amount">$1,868,700</span>
                                </div>
                                <div class="category-item">
                                    <div class="category-info">
                                        <span class="category-name">Ron</span>
                                        <span class="category-percent">10%</span>
                                    </div>
                                    <div class="category-bar">
                                        <div class="bar-fill" style="width: 10%" data-category="ron"></div>
                                    </div>
                                    <span class="category-amount">$1,245,800</span>
                                </div>
                                <div class="category-item">
                                    <div class="category-info">
                                        <span class="category-name">Otros</span>
                                        <span class="category-percent">5%</span>
                                    </div>
                                    <div class="category-bar">
                                        <div class="bar-fill" style="width: 5%" data-category="otros"></div>
                                    </div>
                                    <span class="category-amount">$622,900</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Métricas de Rendimiento -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h4>Rendimiento del Día</h4>
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="performance-metrics">
                            <div class="performance-item">
                                <div class="performance-label">
                                    <span>Ticket Promedio</span>
                                    <span class="performance-value">$24,680</span>
                                </div>
                                <div class="performance-trend trend-up">
                                    +5% vs ayer
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-label">
                                    <span>Productos/Venta</span>
                                    <span class="performance-value">2.8</span>
                                </div>
                                <div class="performance-trend trend-up">
                                    +0.3 vs ayer
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-label">
                                    <span>Clientes/Hora</span>
                                    <span class="performance-value">18.2</span>
                                </div>
                                <div class="performance-trend trend-down">
                                    -2.1 vs ayer
                                </div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-label">
                                    <span>Margen Promedio</span>
                                    <span class="performance-value">38.5%</span>
                                </div>
                                <div class="performance-trend trend-up">
                                    +1.2% vs ayer
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Productos Más Vendidos -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h4>Top Productos Hoy</h4>
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="top-products">
                            <div class="top-product-item">
                                <div class="product-rank">1</div>
                                <div class="product-info">
                                    <span class="product-name">Whisky J. Walker</span>
                                    <span class="product-sales">12 unidades</span>
                                </div>
                                <span class="product-revenue">$600,000</span>
                            </div>
                            <div class="top-product-item">
                                <div class="product-rank">2</div>
                                <div class="product-info">
                                    <span class="product-name">Cerveza Corona</span>
                                    <span class="product-sales">45 unidades</span>
                                </div>
                                <span class="product-revenue">$225,000</span>
                            </div>
                            <div class="top-product-item">
                                <div class="product-rank">3</div>
                                <div class="product-info">
                                    <span class="product-name">Vino Casillero</span>
                                    <span class="product-sales">8 unidades</span>
                                </div>
                                <span class="product-revenue">$200,000</span>
                            </div>
                            <div class="top-product-item">
                                <div class="product-rank">4</div>
                                <div class="product-info">
                                    <span class="product-name">Vodka Absolut</span>
                                    <span class="product-sales">6 unidades</span>
                                </div>
                                <span class="product-revenue">$180,000</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tabla de Productos Más Vendidos del Mes -->
                <div class="table-container">
                    <div class="table-header">
                        <h3>Productos Más Vendidos (Este Mes)</h3>
                        <div>
                            <button class="btn btn-primary">
                                <i class="fas fa-download"></i> Exportar Reporte
                            </button>
                            <button class="btn btn-secondary">
                                <i class="fas fa-sync"></i> Actualizar
                            </button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Categoría</th>
                                <th>Unidades Vendidas</th>
                                <th>Ingresos</th>
                                <th>Rentabilidad</th>
                                <th>Tendencia</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <div class="product-avatar whisky">
                                            <i class="fas fa-wine-bottle"></i>
                                        </div>
                                        <span>Whisky Johnnie Walker Red Label</span>
                                    </div>
                                </td>
                                <td>Whisky</td>
                                <td>45</td>
                                <td>$2,250,000</td>
                                <td class="trend-up">Alta</td>
                                <td>
                                    <div class="trend-indicator trend-up">
                                        <i class="fas fa-arrow-up"></i> 15%
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <div class="product-avatar vino">
                                            <i class="fas fa-wine-glass-alt"></i>
                                        </div>
                                        <span>Vino Casillero del Diablo Cabernet</span>
                                    </div>
                                </td>
                                <td>Vino Tinto</td>
                                <td>38</td>
                                <td>$950,000</td>
                                <td class="trend-up">Media</td>
                                <td>
                                    <div class="trend-indicator trend-up">
                                        <i class="fas fa-arrow-up"></i> 8%
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <div class="product-avatar vodka">
                                            <i class="fas fa-cocktail"></i>
                                        </div>
                                        <span>Vodka Absolut</span>
                                    </div>
                                </td>
                                <td>Vodka</td>
                                <td>32</td>
                                <td>$960,000</td>
                                <td class="trend-up">Alta</td>
                                <td>
                                    <div class="trend-indicator trend-up">
                                        <i class="fas fa-arrow-up"></i> 12%
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <div class="product-avatar ron">
                                            <i class="fas fa-glass-whiskey"></i>
                                        </div>
                                        <span>Ron Viejo de Caldas 8 años</span>
                                    </div>
                                </td>
                                <td>Ron</td>
                                <td>28</td>
                                <td>$700,000</td>
                                <td class="trend-up">Media</td>
                                <td>
                                    <div class="trend-indicator trend-up">
                                        <i class="fas fa-arrow-up"></i> 5%
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Acciones Rápidas -->
                <div class="quick-actions">
                    <h3>Acciones Rápidas</h3>
                    <div class="actions-grid">
                        <button class="action-btn" onclick="window.location.href='{% url 'registro_v' %}'">
                            <div class="action-icon">
                                <i class="fas fa-cash-register"></i>
                            </div>
                            <span>Nueva Venta</span>
                        </button>
                        <button class="action-btn" onclick="window.location.href='{% url 'inventario' %}'">
                            <div class="action-icon">
                                <i class="fas fa-plus-circle"></i>
                            </div>
                            <span>Agregar Stock</span>
                        </button>
                        <button class="action-btn" onclick="window.location.href='{% url 'reporte' %}'">
                            <div class="action-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <span>Ver Reportes</span>
                        </button>
                        <button class="action-btn" onclick="window.location.href='{% url 'inventario' %}'">
                            <div class="action-icon">
                                <i class="fas fa-boxes"></i>
                            </div>
                            <span>Gestionar Inventario</span>
                        </button>
                        <button class="action-btn">
                            <div class="action-icon">
                                <i class="fas fa-bell"></i>
                            </div>
                            <span>Ver Alertas</span>
                        </button>
                        <button class="action-btn">
                            <div class="action-icon">
                                <i class="fas fa-cog"></i>
                            </div>
                            <span>Configuración</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ========== NAVEGACIÓN DEL SIDEBAR ==========
            const navItems = document.querySelectorAll('.nav-item');
            
            // Manejador de clic en items del menú
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const moduleId = this.getAttribute('data-module');
                    
                    // Navegar a la página correspondiente
                    switch(moduleId) {
                        case 'dashboard':
                            window.location.href = "{% url 'panel' %}";
                            break;
                        case 'inventory':
                            window.location.href = "{% url 'inventario' %}";
                            break;
                        case 'sales':
                            window.location.href = "{% url 'registro_v' %}";
                            break;
                        case 'reports':
                            window.location.href = "{% url 'reporte' %}";
                            break;
                        case 'products':
                            window.location.href = "{% url 'catalogo' %}";
                            break;
                        default:
                            console.log('Módulo no reconocido:', moduleId);
                    }
                });
            });

            // ========== ANIMACIONES Y EFECTOS ==========
            // Animación de las cards al cargar
            document.querySelectorAll('.card').forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200);
            });

            // Efectos hover en las action buttons
            document.querySelectorAll('.action-btn').forEach(btn => {
                btn.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                
                btn.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });

            // ========== SIMULACIÓN DE DATOS EN TIEMPO REAL ==========
            function updateLiveMetrics() {
                // Simular actualización de métricas (solo para demo)
                const cards = document.querySelectorAll('.card');
                if (cards.length > 2) {
                    const salesCard = cards[2];
                    const salesValue = salesCard.querySelector('.card-value');
                    const dailyIncome = salesCard.querySelector('.daily-income');
                    
                    // Simular pequeño incremento aleatorio
                    const randomIncrement = Math.floor(Math.random() * 3) + 1;
                    const currentSales = parseInt(salesValue.textContent);
                    const newSales = currentSales + randomIncrement;
                    
                    // Solo actualizar en demo, no en producción real
                    // salesValue.textContent = newSales.toLocaleString();
                }
            }

            // Actualizar cada 30 segundos (solo para demo)
            setInterval(updateLiveMetrics, 30000);

            console.log('Dashboard LicoControl - Navegación activa');
        });

        // ========== FUNCIONES GLOBALES ==========
        function navigateTo(url) {
            window.location.href = url;
        }
    </script>
</body>
</html>